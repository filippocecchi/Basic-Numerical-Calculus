<html>
	<head>       
			<meta http-equiv="content-type" content="text/html; charset=UTF-8">
			<title>Ordinamento array</title>
			
			
			<script language="javascript">
				function generaVettore(){var a,b;if(v=[],document.getElementById("posman").checked)for(a=0;a<dim;a++)v[a]=Number(prompt("Inserisci elemento "+a));else for(v[0]=0,a=1;a<dim;a++)b=Math.floor(1+7*Math.random()),v[a]=v[a-1]+b}function setCounter(){confronti=0}function count(){confronti++}var dim,v=[],q,confronti;
				
				function ricerca()
				{
					/*for(var i=0;i<dim;i++) ricerca sequenzaiale più semplice se non abbiamo informazioni sul vettore
					{
						if(v[i]==q)
							return i;
					}
					return -1;*/
					/*for(var i=0;i<dim&&v[i]<=q;i++) //miglioramento con vet ordinato ma sempre O(n) worst case
					{
						if(v[i]==q)
							return i;
					}
					return -1;*/
					//ricerca binaria/dicotomica
					//ripeti
					//cerca metà
					//scegli destra o sinistra
					/*var sx=0,cx,dx=dim-1;     //O(log(n))
					if(q>v[dx]||q<v[sx])
						return -1;*///questo pezzo non importa nemmeno perchè il logaritmo è incredibilmemnte veloce e risparmierei praticamente nulla
					while(sx<=dx)  	//log2(n)   
					{
						count(); //fa vedere quante volte entro nel ciclo
						cx=Math.floor((sx+dx)/2);
						if(q<v[cx])
							dx=cx-1;
						else
							if(q>v[cx])
								sx=cx+1;
							else
								return cx;
					}
					return -1;
				}
				
				function genera()
				{					
					dim=Number(document.getElementById("posdim").value);
					generaVettore();
				}
				
				function scrivi()
				{
					document.getElementById("posr").innerHTML+="<br/><br/><br/>v: "+v+"<br/><br/>";
				}
								
				function exec()
				{
					var pos;
					q=Number(document.getElementById("posq").value);
					setCounter();
					pos=ricerca();
					
					if(pos!=-1)
						document.getElementById("posr").innerHTML+="<hr width='15%' align='left'/>Elemento "+q+" trovato in posizione "+pos+" con "+confronti+" confronti<br/>";
					else
						document.getElementById("posr").innerHTML+="<hr width='15%' align='left'/>Elemento "+q+" non trovato con "+confronti+" confronti<br/>";
				}
				
				
				
			</script>		
	</head>
	<body style="font-family: verdana, arial; font-size: 14">			
			Dimensione: <input id="posdim" type="text"/>
			(Manuale: <input type="checkbox" id="posman"/>)
			<br/><br/>
			Query: <input id="posq" type="text"/>			
			<br/><br/><br/>
			<button onclick="genera();">Genera!</button>
			<button onclick="scrivi();">Scrivi!</button>	
			<button onclick="exec();">Ricerca!</button>	
			<br/><br/><br/>
			<p id="posr"></p>
	</body>
</html>